<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cursor Test - Firefox Diagnostic</title>
    <style>
        html, body { margin: 0; min-height: 100vh; }
        body { background: #333; }
        h1 { color: white; padding: 30px; }
        p { color: #ccc; padding: 0 30px; }
        .test-box {
            width: 400px; height: 120px; margin: 15px 30px;
            display: flex; align-items: center; justify-content: center;
            color: white; font-size: 16px; font-family: monospace;
        }

        .test-svg { background: #080;
            cursor: url('data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%2232%22 height=%2232%22%3E%3Ccircle cx=%2216%22 cy=%2216%22 r=%2215%22 fill=%22red%22/%3E%3C/svg%3E') 16 16, auto !important;
        }
        .test-png { background: #808;
            cursor: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAABhJREFUKFNj/M/A8J+BgYGRAQMwMowOAQAi4AF1dmeVWAAAAABJRU5ErkJggg==') 4 4, auto !important;
        }
    </style>
</head>
<body>
    <h1>Firefox Cursor Diagnostic</h1>
    <p>Hover over each box:</p>

    <div class="test-box test-svg">Test 3: SVG data URL (red circle) âœ“</div>
    <div class="test-box test-png">Test 4: PNG data URL (FAILS in Firefox)</div>
    <div class="test-box" id="test-png-blob" style="background:#850">Test 6: PNG blob URL (loading...)</div>
    <div class="test-box" id="test-svg-blob" style="background:#058">Test 7: SVG blob URL (loading...)</div>

    <script>
        // Test 6: PNG blob URL - convert canvas PNG to blob URL
        (function() {
            var c = document.createElement('canvas');
            c.width = 32; c.height = 32;
            var ctx = c.getContext('2d');
            ctx.fillStyle = 'red';
            ctx.beginPath();
            ctx.arc(16, 16, 15, 0, Math.PI * 2);
            ctx.fill();
            c.toBlob(function(blob) {
                var url = URL.createObjectURL(blob);
                var el = document.getElementById('test-png-blob');
                el.style.setProperty('cursor', "url('" + url + "') 16 16, auto", 'important');
                el.textContent = 'Test 6: PNG blob URL (red circle?)';
                console.log('Test 6 blob URL:', url);
            }, 'image/png');
        })();

        // Test 7: Pure SVG blob URL (no nested data URL)
        (function() {
            var svg = '<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32">' +
                      '<circle cx="16" cy="16" r="15" fill="blue"/>' +
                      '</svg>';
            var blob = new Blob([svg], {type: 'image/svg+xml'});
            var url = URL.createObjectURL(blob);
            var el = document.getElementById('test-svg-blob');
            el.style.setProperty('cursor', "url('" + url + "') 16 16, auto", 'important');
            el.textContent = 'Test 7: SVG blob URL (blue circle?)';
            console.log('Test 7 blob URL:', url);
        })();
    </script>
</body>
</html>
